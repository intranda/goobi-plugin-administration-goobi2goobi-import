<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui">

    <composite:interface>
    </composite:interface>

    <composite:implementation>
        <style>
.dataTables_wrapper {
    overflow-x: auto;
}

.dataTables_wrapper .row {
    margin: 0;
}

.dataTables_wrapper div[class*="col-xs"] {
    padding: 0 5px;
}

.dataTables_wrapper .dataTables_filter {
    float: none;
    max-width: 100%;
    margin: 10px 0;
}

.dataTables_filter.dataTables_length ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

.dataTables_filter.dataTables_length ul li {
    display: inline-block;
}

.dataTables_filter.dataTables_length .btn {
    display: block;
    padding: 4px 9px;
}

.popup-ul {
    padding-left: 0px;
    margin: 0px;
    list-style-type: none;
    margin-bottom: 3px;
}
</style>

        <h:panelGroup rendered="#{!LoginForm.hasRole('administration_import_data')}">
            <h:outputText
                styleClass="alert alert-danger alert-dismissable margin-bottom-10 margin-top-10"
                value="#{msgs.plugin_MissingPermission} administration_import_data"></h:outputText>
        </h:panelGroup>
        <h:panelGroup
            layout="block"
            styleClass="row"
            id="dashboard"
            rendered="#{LoginForm.hasRole('administration_import_data')}">
            <div class="col-sm-12">
                <div class="box box-color box-bordered">
                    <div
                        class="box-title"
                        id="title">
                        <h3>
                            <i class="fa fa-plug"></i>
                            <h:outputText value="#{msgs.plugin_administration_configuredRules}" />
                        </h3>
                    </div>
                    <div class="box-content nopadding">
                        <div class="dataTables_wrapper">
                            <h:form id="tableForm">
                                <x:dataTable
                                    styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                    value="#{AdministrationForm.administrationPlugin.configurationItemList}"
                                    var="rule">
                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_rulename}" />
                                            </x:div>
                                        </f:facet>
                                        <h:outputText value="#{rule.rulename}" />
                                    </x:column>
                                    <x:column
                                        styleClass="tableColumnOverflow"
                                        id="stepColumn">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_stepRules}" />
                                            </x:div>
                                        </f:facet>

                                        <h:commandLink
                                            rendered="#{!rule.stepPanelExpanded and rule.configuredStepRulesSize != 0}"
                                            title="#{rule.configuredStepRulesSize}"
                                            id="displayStepDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredStepRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.stepPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.stepPanelExpanded and rule.configuredStepRulesSize != 0}"
                                            title="#{rule.configuredStepRulesSize}"
                                            id="hideStepDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredStepRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.stepPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredStepRulesSize}"
                                            rendered="#{rule.configuredStepRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.stepPanelExpanded}">

                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="stepList"
                                                        var="step"
                                                        value="#{rule.configuredStepRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_stepName}" />
                                                            </f:facet>
                                                            <h:outputText
                                                                value="#{step.currentStepName}"
                                                                rendered="#{step.configurationType != 'DELETE_CURRENT_STEP'}">
                                                                <f:passThroughAttribute
                                                                    name="data-trigger"
                                                                    value="hover" />
                                                                <f:passThroughAttribute
                                                                    name="data-container"
                                                                    value="body" />
                                                                <f:passThroughAttribute
                                                                    name="data-toggle"
                                                                    value="popover" />
                                                                <f:passThroughAttribute
                                                                    name="data-placement"
                                                                    value="top" />
                                                                <f:passThroughAttribute
                                                                    name="data-html"
                                                                    value="true" />
                                                                <f:passThroughAttribute
                                                                    name="data-content"
                                                                    value="#{step.summary}" />
                                                            </h:outputText>

                                                            <h:outputText
                                                                value="#{step.currentStepName}"
                                                                rendered="#{step.configurationType == 'DELETE_CURRENT_STEP'}" />
                                                        </h:column>



                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_changeType}" />
                                                            </f:facet>
                                                            <h:outputText value="#{msgs[step.configurationType]}" />
                                                        </h:column>
                                                    </x:dataTable>
                                                </div>

                                            </div>
                                        </h:panelGroup>
                                    </x:column>

                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_propertyRules}" />
                                            </x:div>
                                        </f:facet>
                                        <h:commandLink
                                            rendered="#{!rule.propertyPanelExpanded and rule.configuredPropertyRulesSize != 0}"
                                            title="#{rule.configuredPropertyRulesSize}"
                                            id="displayPropertyDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredPropertyRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.propertyPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.propertyPanelExpanded and rule.configuredPropertyRulesSize != 0}"
                                            title="#{rule.configuredPropertyRulesSize}"
                                            id="hidePropertyDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredPropertyRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.propertyPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredPropertyRulesSize}"
                                            rendered="#{rule.configuredPropertyRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.propertyPanelExpanded}">
                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="propertyList"
                                                        var="property"
                                                        value="#{rule.configuredPropertyRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_propertyName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{property.oldPropertyName}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newPropertyName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{property.newPropertyName}" />
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_propertyValue}" />
                                                            </f:facet>
                                                            <h:outputText value="#{property.oldPropertyValue}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newPropertyValue}" />
                                                            </f:facet>
                                                            <h:outputText value="#{property.newPropertyValue}" />
                                                        </h:column>
                                                    </x:dataTable>
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                    </x:column>

                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataRules}" />
                                            </x:div>
                                        </f:facet>
                                        <h:commandLink
                                            rendered="#{!rule.metadataPanelExpanded and rule.configuredMetadataRulesSize != 0}"
                                            title="#{rule.configuredMetadataRulesSize}"
                                            id="displayMetadataDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredMetadataRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.metadataPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.metadataPanelExpanded and rule.configuredMetadataRulesSize != 0}"
                                            title="#{rule.configuredMetadataRulesSize}"
                                            id="hideMetadataDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredMetadataRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.metadataPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredMetadataRulesSize}"
                                            rendered="#{rule.configuredMetadataRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.metadataPanelExpanded}">
                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="MetadataList"
                                                        var="Metadata"
                                                        value="#{rule.configuredMetadataRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Metadata.metadataName}" />
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataChangeType}" />
                                                            </f:facet>
                                                            <h:outputText value="#{msgs[Metadata.configurationType]}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataValueContitionRegex}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Metadata.valueContitionRegex}" />
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataValueReplacementRegex}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Metadata.valueReplacementRegex}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_metadataPosition}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Metadata.position}" />
                                                        </h:column>
                                                    </x:dataTable>
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                    </x:column>

                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_rulesetRules}" />
                                            </x:div>
                                        </f:facet>
                                        <h:commandLink
                                            rendered="#{!rule.rulesetPanelExpanded and rule.configuredRulesetRulesSize != 0}"
                                            title="#{rule.configuredRulesetRulesSize}"
                                            id="displayRulesetDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredRulesetRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.rulesetPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.rulesetPanelExpanded and rule.configuredRulesetRulesSize != 0}"
                                            title="#{rule.configuredRulesetRulesSize}"
                                            id="hideRulesetDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredRulesetRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.rulesetPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredRulesetRulesSize}"
                                            rendered="#{rule.configuredRulesetRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.rulesetPanelExpanded}">
                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="RulesetList"
                                                        var="Ruleset"
                                                        value="#{rule.configuredRulesetRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_rulesetName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Ruleset.oldRulesetName}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newRulesetName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Ruleset.newRulesetName}" />
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newFileName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Ruleset.newFileName}" />
                                                        </h:column>

                                                    </x:dataTable>
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                    </x:column>

                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_docketRules}" />
                                            </x:div>
                                        </f:facet>
                                        <h:commandLink
                                            rendered="#{!rule.docketPanelExpanded and rule.configuredDocketRulesSize != 0}"
                                            title="#{rule.configuredDocketRulesSize}"
                                            id="displayDocketDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredDocketRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.docketPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.docketPanelExpanded and rule.configuredDocketRulesSize != 0}"
                                            title="#{rule.configuredDocketRulesSize}"
                                            id="hideDocketDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredDocketRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.docketPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredDocketRulesSize}"
                                            rendered="#{rule.configuredDocketRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.docketPanelExpanded}">
                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="DocketList"
                                                        var="Docket"
                                                        value="#{rule.configuredDocketRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_docketName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Docket.oldDocketName}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newDocketName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Docket.newDocketName}" />
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newFileName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Docket.newFileName}" />
                                                        </h:column>

                                                    </x:dataTable>
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                    </x:column>
                                    <x:column styleClass="tableColumnOverflow">
                                        <f:facet name="header">
                                            <x:div>
                                                <!-- Header -->
                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_projectRules}" />
                                            </x:div>
                                        </f:facet>
                                        <h:commandLink
                                            rendered="#{!rule.projectPanelExpanded and rule.configuredProjectRulesSize != 0}"
                                            title="#{rule.configuredProjectRulesSize}"
                                            id="displayProjectDetails">
                                            <i class="fa fa-angle-right margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredProjectRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.projectPanelExpanded}"
                                                value="true" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>

                                        <h:commandLink
                                            rendered="#{rule.projectPanelExpanded and rule.configuredProjectRulesSize != 0}"
                                            title="#{rule.configuredProjectRulesSize}"
                                            id="hideProjectDetails">
                                            <i class="fa fa-angle-down margin-right-5"></i>
                                            <h:outputText value="#{rule.configuredProjectRulesSize}" />
                                            <f:setPropertyActionListener
                                                target="#{rule.projectPanelExpanded}"
                                                value="false" />
                                            <f:ajax render="@form" />
                                        </h:commandLink>
                                        <h:outputText
                                            value="#{rule.configuredProjectRulesSize}"
                                            rendered="#{rule.configuredProjectRulesSize == 0}" />
                                        <h:panelGroup rendered="#{rule.projectPanelExpanded}">
                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <i class="fa fa-list"></i>
                                                        #{msgs.details}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <x:dataTable
                                                        styleClass="table table-hover table-bordered"
                                                        id="ProjectList"
                                                        var="Project"
                                                        value="#{rule.configuredProjectRules}">
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_projectName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Project.oldProjectName}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="#{msgs.plugin_adiministration_dataimport_newProjectName}" />
                                                            </f:facet>
                                                            <h:outputText value="#{Project.newProjectName}" />
                                                        </h:column>
                                                    </x:dataTable>
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                    </x:column>
                                </x:dataTable>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>




            <div class="col-sm-12">
                <div class="box box-color box-bordered">
                    <div
                        class="box-title"
                        id="title">
                        <h3>
                            <i class="fa fa-plug"></i>
                            <h:outputText value="#{msgs.plugin_administration_imortArea}" />
                        </h3>
                    </div>
                    <div class="box-content nopadding">
                        <div class="dataTables_wrapper">
                            <h:form styleClass="form-horizontal form-bordered">
                                <div class="row">
                                    <div class="col-sm-6">





                                        <div
                                            class="form-group"
                                            style="">
                                            <div class="col-sm-3 control-label">
                                                <h:outputLabel
                                                    for="rules"
                                                    value="plugin_adiministration_dataimport_rulename" />
                                                <h:panelGroup>
                                                    <i class="fa fa-asterisk pull-right font-asterisk" />
                                                </h:panelGroup>
                                            </div>
                                            <div class="col-sm-9">
                                                <h:selectOneListbox
                                                    id="rules"
                                                    styleClass="form-control massimportListHeight"
                                                    value="#{AdministrationForm.administrationPlugin.currentRule}"
                                                    required="true">
                                                    <f:selectItems
                                                        value="#{AdministrationForm.administrationPlugin.allRuleNames}"
                                                        var="file"
                                                        itemLabel="#{file}"
                                                        itemValue="#{file}" />
                                                </h:selectOneListbox>
                                            </div>
                                        </div>


                                    </div>

                                    <div class="col-sm-6">
                                        <h:commandLink
                                            id="reload"
                                            action="#{AdministrationForm.administrationPlugin.generateAllFilenames()}"
                                            styleClass="btn btn-mini"
                                            title="#{msgs.reload}">
                                            <i
                                                class="fa fa-refresh"
                                                title="#{msgs.reload}" />
                                        </h:commandLink>


                                        <intranda:formInputSelectMany
                                            id="files"
                                            label="#{msgs.plugin_adiministration_dataimport_files}"
                                            field="#{AdministrationForm.administrationPlugin.selectedFilenames}"
                                            help=""
                                            name="files"
                                            selectItems="#{AdministrationForm.administrationPlugin.allFilenames}"
                                            fieldStyle="form-control massimportListHeight"
                                            required="true"
                                            itemLabel="#{file}"
                                            itemValue="#{file}"
                                            var="file" />




                                    </div>
                                </div>
                            </h:form>
                            <br />
                            <br />


                        </div>
                    </div>
                </div>
            </div>
        </h:panelGroup>

    </composite:implementation>

</ui:composition>